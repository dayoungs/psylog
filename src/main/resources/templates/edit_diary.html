<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/write.css">
    <title>ì¼ê¸° ì‘ì„± í™”ë©´</title>

    <!--í°íŠ¸ ì ìš©-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jolly+Lodger&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap" rel="stylesheet">

    <!--ì•„ì´ì½˜ ì ìš©-->
    <script src="https://kit.fontawesome.com/a1969e7b61.js" crossorigin="anonymous"></script>
</head>

<body>
<!-- í—¤ë” ë¶€ë¶„ -->
<div class="title">
    <h1>PSYLOG</h1>
    <button class="button" id="logout_btn" onclick="location.href='/logout'">ë¡œê·¸ì•„ì›ƒ <i class="fa-solid fa-right-from-bracket"></i></button>
    <button class="button" id="mypage_btn" onclick="location.href='/member/mypage'">My Page <i class="fa-solid fa-user"></i></button>
</div>
<div class="header_blue"></div>

<!-- ë©”ë‰´ë°” -->
<div class="menu">
    <a href="/login_home">í™ˆ <i class="fa-solid fa-house"></i></a>
    <a href="/post/save">ì¼ê¸° ì‘ì„± <i class="fa-solid fa-pen"></i></a>
    <a href="/post/list">My ì¼ê¸°ì¥ <i class="fa-solid fa-list-ul"></i></a>
</div>

<!-- ì¼ê¸° ì‘ì„± ì¹¸ -->
<div class="diary-form">
    <form action="/post/update" method="post" name="updateForm">
        <input type="hidden" name="postNo" th:value="${postUpdate.postNo}"><br>
        <input type="hidden" name="postWriter" th:value="${postUpdate.postWriter}"><br>
        <label for="date">ë‚ ì§œ:</label>
        <input type="date" id="date" name="updateDate" th:value="${postUpdate.updateDate}" required>

        <div id="emotion_container">
            <div id="emotion_selection">
                <label for="emotion">ê¸°ë¶„:<br></label>
                <select id="emotion" name="postEmotion" th:select="${postUpdate.postEmotion}" required onchange="displayImage()">
                    <option value="">== ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ì„ íƒí•˜ì„¸ìš” ==</option>
                    <option value="happy">ì‹ ë‚˜ê³  ê¸°ë»ìš”ğŸ˜„</option>
                    <option value="excited">ë‘ê·¼ê±°ë¦¬ê³  ì„¤ë ˆìš”ğŸ˜</option>
                    <option value="sad">ìŠ¬í”„ê³  ìš°ìš¸í•´ìš”ğŸ˜­</option>
                    <option value="disappointed">ì¢Œì ˆ... ë˜ëŠ”ê²Œ ì—†ì–´ìš”ğŸ˜</option>
                    <option value="angry">ì§œì¦ë‚˜ê³  í™”ê°€ë‚˜ìš”ğŸ˜¡</option>
                    <option value="afraid">ë¶ˆì•ˆí•˜ê³  ë‘ë ¤ì›Œìš”ğŸ˜±</option>
                </select><br>
            </div>
            <img id="emotionImage" src="/images/íˆ¬ëª…ë°°ê²½.png">
        </div>

        <label for="diary_title">ì¼ê¸° ì œëª©:</label>
        <input type="text" id="diary_title" name="postTitle" style="margin-bottom: 30px;" th:value="${postUpdate.postTitle}" required>

        <label for="content">ì¼ê¸° ë‚´ìš©:</label>
        <textarea id="content" name="postContent" th:text="${postUpdate.postContent}" ></textarea>

        <button id="submit_btn" type="submit"><b>ì¼ê¸° ì €ì¥</b></button>
    </form>
</div>

<script>
    // í˜„ì¬ ë‚ ì§œë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
    function getCurrentDate() {
        var today = new Date();
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        var yyyy = today.getFullYear();

        today = yyyy + '-' + mm + '-' + dd;
        return today;
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ë‚ ì§œ ì´í›„ì˜ ë‚ ì§œë“¤ì„ ì„ íƒí•  ìˆ˜ ì—†ë„ë¡ ì„¤ì •
    window.onload = function () {
        var today = new Date().toISOString().split('T')[0];
        document.getElementById('date').setAttribute('max', today);
    };

    const emotion = formData.get('emotion');
    let emotionText = '';
    switch(emotion) {
        case 'happy':
            emotionText = 'ê¸°ì¨ì´';
            break;
        case 'excited':
            emotionText = 'ì„¤ë ˜ì´';
            break;
        case 'sad':
            emotionText = 'ìŠ¬í””ì´';
            break;
        case 'disappointed':
            emotionText = 'ì¢Œì ˆì´';
            break;
        case 'angry':
            emotionText = 'í™”ë‚¨ì´';
            break;
        case 'afraid':
            emotionText = 'ë¶ˆì•ˆì´';
            break;
        default:
            emotionText = '';
    }

    //ì„ íƒí•œ ê°ì • ìºë¦­í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜
    function displayImage() {
        var selectBox = document.getElementById("emotion");
        var selectedValue = selectBox.value;
        var imageElement = document.getElementById("emotionImage");
        if (selectedValue === "happy") {
            imageElement.src = "/images/ê¸°ì¨ì´.png";
        } else if (selectedValue === "excited") {
            imageElement.src = "/images/ì„¤ë ˜ì´.png";
        } else if (selectedValue === "sad") {
            imageElement.src = "/images/ìŠ¬í””ì´.png";
        } else if (selectedValue === "disappointed") {
            imageElement.src = "/images/ì¢Œì ˆì´.png";
        } else if (selectedValue === "angry") {
            imageElement.src = "/images/í™”ë‚¨ì´.png";
        } else if (selectedValue === "afraid") {
            imageElement.src = "/images/ë¶ˆì•ˆì´.png";
        } else {
            // íˆ¬ëª… ì´ë¯¸ì§€(ê°ì • ì„ íƒì„ í•˜ì§€ ì•Šì€ ê²½ìš°)
            imageElement.src = "/images/íˆ¬ëª…ë°°ê²½.png";
        }
    }

</script>

</body>
</html>